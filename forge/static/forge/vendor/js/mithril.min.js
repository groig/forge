new function(){function e(e,n,t,r,i,a){return{tag:e,key:n,attrs:t,children:r,text:i,dom:a,domSize:undefined,state:{},events:undefined,instance:undefined,skip:false}}e.normalize=function(n){if(Array.isArray(n))return e("[",undefined,undefined,e.normalizeChildren(n),undefined,undefined);if(n!=null&&typeof n!=="object")return e("#",undefined,undefined,n===false?"":n,undefined,undefined);return n};e.normalizeChildren=function n(t){for(var r=0;r<t.length;r++){t[r]=e.normalize(t[r])}return t};var n=/(?:(^|#|\.)([^#\.\[\]]+))|(\[(.+?)(?:\s*=\s*("|'|)((?:\\["'\]]|.)*?)\5)?\])/g;var t={};function r(r){if(r==null||typeof r!=="string"&&typeof r.view!=="function"){throw Error("The selector must be either a string or a component.")}if(typeof r==="string"&&t[r]===undefined){var i,a,l=[],o={};while(i=n.exec(r)){var f=i[1],u=i[2];if(f===""&&u!=="")a=u;else if(f==="#")o.id=u;else if(f===".")l.push(u);else if(i[3][0]==="["){var s=i[6];if(s)s=s.replace(/\\(["'])/g,"$1").replace(/\\\\/g,"\\");if(i[4]==="class")l.push(s);else o[i[4]]=s||true}}if(l.length>0)o.className=l.join(" ");t[r]=function(n,t){var r=false,i,l;var f=n.className||n.class;for(var u in o)n[u]=o[u];if(f!==undefined){if(n.class!==undefined){n.class=undefined;n.className=f}if(o.className!==undefined)n.className=o.className+" "+f}for(var u in n){if(u!=="key"){r=true;break}}if(Array.isArray(t)&&t.length==1&&t[0]!=null&&t[0].tag==="#")l=t[0].children;else i=t;return e(a||"div",n.key,r?n:undefined,i,l,undefined)}}var c,d,v;if(arguments[1]==null||typeof arguments[1]==="object"&&arguments[1].tag===undefined&&!Array.isArray(arguments[1])){c=arguments[1];v=2}else v=1;if(arguments.length===v+1){d=Array.isArray(arguments[v])?arguments[v]:[arguments[v]]}else{d=[];for(var h=v;h<arguments.length;h++)d.push(arguments[h])}if(typeof r==="string")return t[r](c||{},e.normalizeChildren(d));return e(r,c&&c.key,c||{},e.normalizeChildren(d),undefined,undefined)}r.trust=function(n){if(n==null)n="";return e("<",undefined,undefined,n,undefined,undefined)};r.fragment=function(n,t){return e("[",n.key,n,e.normalizeChildren(t),undefined,undefined)};var i=r;var a=function(e){if(!(this instanceof a))throw new Error("Promise must be called with `new`");if(typeof e!=="function")throw new TypeError("executor must be a function");var n=this,t=[],r=[],i=u(t,true),l=u(r,false);var o=n._instance={resolvers:t,rejectors:r};var f=typeof setImmediate==="function"?setImmediate:setTimeout;function u(e,i){return function a(u){var c;try{if(i&&u!=null&&(typeof u==="object"||typeof u==="function")&&typeof(c=u.then)==="function"){if(u===n)throw new TypeError("Promise can't be resolved w/ itself");s(c.bind(u))}else{f(function(){if(!i&&e.length===0)console.error("Possible unhandled promise rejection:",u);for(var n=0;n<e.length;n++)e[n](u);t.length=0,r.length=0;o.state=i;o.retry=function(){a(u)}})}}catch(e){l(e)}}}function s(e){var n=0;function t(e){return function(t){if(n++>0)return;e(t)}}var r=t(l);try{e(t(i),r)}catch(e){r(e)}}s(e)};a.prototype.then=function(e,n){var t=this,r=t._instance;function i(e,n,t,i){n.push(function(n){if(typeof e!=="function")t(n);else try{l(e(n))}catch(e){if(o)o(e)}});if(typeof r.retry==="function"&&i===r.state)r.retry()}var l,o;var f=new a(function(e,n){l=e,o=n});i(e,r.resolvers,l,true),i(n,r.rejectors,o,false);return f};a.prototype.catch=function(e){return this.then(null,e)};a.resolve=function(e){if(e instanceof a)return e;return new a(function(n){n(e)})};a.reject=function(e){return new a(function(n,t){t(e)})};a.all=function(e){return new a(function(n,t){var r=e.length,i=0,a=[];if(e.length===0)n([]);else for(var l=0;l<e.length;l++){(function(l){function o(e){i++;a[l]=e;if(i===r)n(a)}if(e[l]!=null&&(typeof e[l]==="object"||typeof e[l]==="function")&&typeof e[l].then==="function"){e[l].then(o,t)}else o(e[l])})(l)}})};a.race=function(e){return new a(function(n,t){for(var r=0;r<e.length;r++){e[r].then(n,t)}})};if(typeof window!=="undefined"){if(typeof window.Promise==="undefined")window.Promise=a;var a=window.Promise}else if(typeof global!=="undefined"){if(typeof global.Promise==="undefined")global.Promise=a;var a=global.Promise}else{}var l=function(e){if(Object.prototype.toString.call(e)!=="[object Object]")return"";var n=[];for(var t in e){r(t,e[t])}return n.join("&");function r(e,t){if(Array.isArray(t)){for(var i=0;i<t.length;i++){r(e+"["+i+"]",t[i])}}else if(Object.prototype.toString.call(t)==="[object Object]"){for(var i in t){r(e+"["+i+"]",t[i])}}else n.push(encodeURIComponent(e)+(t!=null&&t!==""?"="+encodeURIComponent(t):""))}};var o=function(e,n){var t=0;var r;function i(e){r=e}function a(){var e=0;function n(){if(--e===0&&typeof r==="function")r()}return function t(r){var i=r.then;r.then=function(){e++;var a=i.apply(r,arguments);a.then(n,function(t){n();if(e===0)throw t});return t(a)};return r}}function o(e,n){if(typeof e==="string"){var t=e;e=n||{};if(e.url==null)e.url=t}return e}function f(t,r){var i=a();t=o(t,r);var l=new n(function(n,r){if(t.method==null)t.method="GET";t.method=t.method.toUpperCase();var i=typeof t.useBody==="boolean"?t.useBody:t.method!=="GET"&&t.method!=="TRACE";if(typeof t.serialize!=="function")t.serialize=typeof FormData!=="undefined"&&t.data instanceof FormData?function(e){return e}:JSON.stringify;if(typeof t.deserialize!=="function")t.deserialize=d;if(typeof t.extract!=="function")t.extract=v;t.url=s(t.url,t.data);if(i)t.data=t.serialize(t.data);else t.url=c(t.url,t.data);var a=new e.XMLHttpRequest;a.open(t.method,t.url,typeof t.async==="boolean"?t.async:true,typeof t.user==="string"?t.user:undefined,typeof t.password==="string"?t.password:undefined);if(t.serialize===JSON.stringify&&i){a.setRequestHeader("Content-Type","application/json; charset=utf-8")}if(t.deserialize===d){a.setRequestHeader("Accept","application/json, text/*")}if(t.withCredentials)a.withCredentials=t.withCredentials;for(var l in t.headers)if({}.hasOwnProperty.call(t.headers,l)){a.setRequestHeader(l,t.headers[l])}if(typeof t.config==="function")a=t.config(a,t)||a;a.onreadystatechange=function(){if(a.status&&a.readyState===4){try{var e=t.extract!==v?t.extract(a,t):t.deserialize(t.extract(a,t));if(a.status>=200&&a.status<300||a.status===304){n(h(t.type,e))}else{var i=new Error(a.responseText);for(var l in e)i[l]=e[l];r(i)}}catch(e){r(e)}}};if(i&&t.data!=null)a.send(t.data);else a.send()});return t.background===true?l:i(l)}function u(r,i){var l=a();r=o(r,i);var f=new n(function(n,i){var a=r.callbackName||"_mithril_"+Math.round(Math.random()*1e16)+"_"+t++;var l=e.document.createElement("script");e[a]=function(t){l.parentNode.removeChild(l);n(h(r.type,t));delete e[a]};l.onerror=function(){l.parentNode.removeChild(l);i(new Error("JSONP request failed"));delete e[a]};if(r.data==null)r.data={};r.url=s(r.url,r.data);r.data[r.callbackKey||"callback"]=a;l.src=c(r.url,r.data);e.document.documentElement.appendChild(l)});return r.background===true?f:l(f)}function s(e,n){if(n==null)return e;var t=e.match(/:[^\/]+/gi)||[];for(var r=0;r<t.length;r++){var i=t[r].slice(1);if(n[i]!=null){e=e.replace(t[r],n[i])}}return e}function c(e,n){var t=l(n);if(t!==""){var r=e.indexOf("?")<0?"?":"&";e+=r+t}return e}function d(e){try{return e!==""?JSON.parse(e):null}catch(n){throw new Error(e)}}function v(e){return e.responseText}function h(e,n){if(typeof e==="function"){if(Array.isArray(n)){for(var t=0;t<n.length;t++){n[t]=new e(n[t])}}else return new e(n)}return n}return{request:f,jsonp:u,setCompletionCallback:i}};var f=o(window,a);var u=function(n){var t=n.document;var r=t.createDocumentFragment();var i;function a(e){return i=e}function l(e,n,t,r,i,a,l){for(var f=t;f<r;f++){var u=n[f];if(u!=null){C(e,o(u,i,l),a)}}}function o(e,n,t){var r=e.tag;if(e.attrs!=null)U(e.attrs,e,n);if(typeof r==="string"){switch(r){case"#":return f(e);case"<":return u(e);case"[":return s(e,n,t);default:return c(e,n,t)}}else return d(e,n,t)}function f(e){return e.dom=t.createTextNode(e.children)}function u(e){var n=e.children.match(/^\s*?<(\w+)/im)||[];var r={caption:"table",thead:"table",tbody:"table",tfoot:"table",tr:"tbody",th:"tr",td:"tr",colgroup:"table",col:"colgroup"}[n[1]]||"div";var i=t.createElement(r);i.innerHTML=e.children;e.dom=i.firstChild;e.domSize=i.childNodes.length;var a=t.createDocumentFragment();var l;while(l=i.firstChild){a.appendChild(l)}return a}function s(e,n,r){var i=t.createDocumentFragment();if(e.children!=null){var a=e.children;l(i,a,0,a.length,n,null,r)}e.dom=i.firstChild;e.domSize=i.childNodes.length;return i}function c(n,r,i){var a=n.tag;switch(n.tag){case"svg":i="http://www.w3.org/2000/svg";break;case"math":i="http://www.w3.org/1998/Math/MathML";break}var o=n.attrs;var f=o&&o.is;var u=i?f?t.createElementNS(i,a,{is:f}):t.createElementNS(i,a):f?t.createElement(a,{is:f}):t.createElement(a);n.dom=u;if(o!=null){T(n,o,i)}if(n.attrs!=null&&n.attrs.contenteditable!=null){z(n)}else{if(n.text!=null){if(n.text!=="")u.textContent=n.text;else n.children=[e("#",undefined,undefined,n.text,undefined,undefined)]}if(n.children!=null){var s=n.children;l(u,s,0,s.length,r,null,i);M(n)}}return u}function d(n,t,i){n.state=Object.create(n.tag);var a=n.tag.view;if(a.reentrantLock!=null)return r;a.reentrantLock=true;U(n.tag,n,t);n.instance=e.normalize(a.call(n.state,n));a.reentrantLock=null;if(n.instance!=null){if(n.instance===n)throw Error("A view cannot return the vnode it received as arguments");var l=o(n.instance,t,i);n.dom=n.instance.dom;n.domSize=n.dom!=null?n.instance.domSize:0;return l}else{n.domSize=0;return r}}function v(e,n,t,r,i,a){if(n===t||n==null&&t==null)return;else if(n==null)l(e,t,0,t.length,r,i,undefined);else if(t==null)E(n,0,n.length,t);else{if(n.length===t.length){var f=false;for(var u=0;u<t.length;u++){if(t[u]!=null&&n[u]!=null){f=t[u].key==null&&n[u].key==null;break}}if(f){for(var u=0;u<n.length;u++){if(n[u]===t[u])continue;else if(n[u]==null&&t[u]!=null)C(e,o(t[u],r,a),S(n,u+1,i));else if(t[u]==null)E(n,u,u+1,t);else h(e,n[u],t[u],r,S(n,u+1,i),false,a)}return}}var s=b(n,t);if(s)n=n.concat(n.pool);var c=0,d=0,v=n.length-1,m=t.length-1,p;while(v>=c&&m>=d){var g=n[c],y=t[d];if(g===y&&!s)c++,d++;else if(g==null)c++;else if(y==null)d++;else if(g.key===y.key){c++,d++;h(e,g,y,r,S(n,c,i),s,a);if(s&&g.tag===y.tag)C(e,k(g),i)}else{var g=n[v];if(g===y&&!s)v--,d++;else if(g==null)v--;else if(y==null)d++;else if(g.key===y.key){h(e,g,y,r,S(n,v+1,i),s,a);if(s||d<m)C(e,k(g),S(n,c,i));v--,d++}else break}}while(v>=c&&m>=d){var g=n[v],y=t[m];if(g===y&&!s)v--,m--;else if(g==null)v--;else if(y==null)m--;else if(g.key===y.key){h(e,g,y,r,S(n,v+1,i),s,a);if(s&&g.tag===y.tag)C(e,k(g),i);if(g.dom!=null)i=g.dom;v--,m--}else{if(!p)p=x(n,v);if(y!=null){var w=p[y.key];if(w!=null){var z=n[w];h(e,z,y,r,S(n,v+1,i),s,a);C(e,k(z),i);n[w].skip=true;if(z.dom!=null)i=z.dom}else{var A=o(y,r,undefined);C(e,A,i);i=A}}m--}if(m<d)break}l(e,t,d,m+1,r,i,a);E(n,c,v+1,t)}}function h(e,n,t,r,i,a,l){var f=n.tag,u=t.tag;if(f===u){t.state=n.state;t.events=n.events;if(B(t,n))return;if(t.attrs!=null){_(t.attrs,t,r,a)}if(typeof f==="string"){switch(f){case"#":m(n,t);break;case"<":p(e,n,t,i);break;case"[":g(e,n,t,r,i,l);break;default:y(n,t,r,l)}}else w(e,n,t,r,i,a,l)}else{A(n,null);C(e,o(t,r,l),i)}}function m(e,n){if(e.children.toString()!==n.children.toString()){e.dom.nodeValue=n.children}n.dom=e.dom}function p(e,n,t,r){if(n.children!==t.children){k(n);C(e,u(t),r)}else t.dom=n.dom,t.domSize=n.domSize}function g(e,n,t,r,i,a){v(e,n.children,t.children,r,i,a);var l=0,o=t.children;t.dom=null;if(o!=null){for(var f=0;f<o.length;f++){var u=o[f];if(u!=null&&u.dom!=null){if(t.dom==null)t.dom=u.dom;l+=u.domSize||1}}if(l!==1)t.domSize=l}}function y(n,t,r,i){var a=t.dom=n.dom;switch(t.tag){case"svg":i="http://www.w3.org/2000/svg";break;case"math":i="http://www.w3.org/1998/Math/MathML";break}if(t.tag==="textarea"){if(t.attrs==null)t.attrs={};if(t.text!=null){t.attrs.value=t.text;t.text=undefined}}P(t,n.attrs,t.attrs,i);if(t.attrs!=null&&t.attrs.contenteditable!=null){z(t)}else if(n.text!=null&&t.text!=null&&t.text!==""){if(n.text.toString()!==t.text.toString())n.dom.firstChild.nodeValue=t.text}else{if(n.text!=null)n.children=[e("#",undefined,undefined,n.text,undefined,n.dom.firstChild)];if(t.text!=null)t.children=[e("#",undefined,undefined,t.text,undefined,undefined)];v(a,n.children,t.children,r,null,i)}}function w(n,t,r,i,a,l,f){r.instance=e.normalize(r.tag.view.call(r.state,r));_(r.tag,r,i,l);if(r.instance!=null){if(t.instance==null)C(n,o(r.instance,i,f),a);else h(n,t.instance,r.instance,i,a,l,f);r.dom=r.instance.dom;r.domSize=r.instance.domSize}else if(t.instance!=null){A(t.instance,null);r.dom=undefined;r.domSize=0}else{r.dom=t.dom;r.domSize=t.domSize}}function b(e,n){if(e.pool!=null&&Math.abs(e.pool.length-n.length)<=Math.abs(e.length-n.length)){var t=e[0]&&e[0].children&&e[0].children.length||0;var r=e.pool[0]&&e.pool[0].children&&e.pool[0].children.length||0;var i=n[0]&&n[0].children&&n[0].children.length||0;if(Math.abs(r-i)<=Math.abs(t-i)){return true}}return false}function x(e,n){var t={},r=0;for(var r=0;r<n;r++){var i=e[r];if(i!=null){var a=i.key;if(a!=null)t[a]=r}}return t}function k(e){var n=e.domSize;if(n!=null||e.dom==null){var r=t.createDocumentFragment();if(n>0){var i=e.dom;while(--n)r.appendChild(i.nextSibling);r.insertBefore(i,r.firstChild)}return r}else return e.dom}function S(e,n,t){for(;n<e.length;n++){if(e[n]!=null&&e[n].dom!=null)return e[n].dom}return t}function C(e,n,t){if(t&&t.parentNode)e.insertBefore(n,t);else e.appendChild(n)}function z(e){var n=e.children;if(n!=null&&n.length===1&&n[0].tag==="<"){var t=n[0].children;if(e.dom.innerHTML!==t)e.dom.innerHTML=t}else if(e.text!=null||n!=null&&n.length!==0)throw new Error("Child node of a contenteditable must be trusted")}function E(e,n,t,r){for(var i=n;i<t;i++){var a=e[i];if(a!=null){if(a.skip)a.skip=false;else A(a,r)}}}function A(e,n){var t=1,r=0;if(e.attrs&&e.attrs.onbeforeremove){var i=e.attrs.onbeforeremove.call(e.state,e);if(i!=null&&typeof i.then==="function"){t++;i.then(a,a)}}if(typeof e.tag!=="string"&&e.tag.onbeforeremove){var i=e.tag.onbeforeremove.call(e.state,e);if(i!=null&&typeof i.then==="function"){t++;i.then(a,a)}}a();function a(){if(++r===t){j(e);if(e.dom){var i=e.domSize||1;if(i>1){var a=e.dom;while(--i){N(a.nextSibling)}}N(e.dom);if(n!=null&&e.domSize==null&&!q(e.attrs)&&typeof e.tag==="string"){if(!n.pool)n.pool=[e];else n.pool.push(e)}}}}}function N(e){var n=e.parentNode;if(n!=null)n.removeChild(e)}function j(e){if(e.attrs&&e.attrs.onremove)e.attrs.onremove.call(e.state,e);if(typeof e.tag!=="string"&&e.tag.onremove)e.tag.onremove.call(e.state,e);if(e.instance!=null)j(e.instance);else{var n=e.children;if(Array.isArray(n)){for(var t=0;t<n.length;t++){var r=n[t];if(r!=null)j(r)}}}}function T(e,n,t){for(var r in n){O(e,r,null,n[r],t)}}function O(e,n,r,i,a){var l=e.dom;if(n==="key"||n==="is"||r===i&&!I(e,n)&&typeof i!=="object"||typeof i==="undefined"||R(n))return;var o=n.indexOf(":");if(o>-1&&n.substr(0,o)==="xlink"){l.setAttributeNS("http://www.w3.org/1999/xlink",n.slice(o+1),i)}else if(n[0]==="o"&&n[1]==="n"&&typeof i==="function")H(e,n,i);else if(n==="style")F(l,r,i);else if(n in l&&!D(n)&&a===undefined&&!L(e)){if(e.tag==="input"&&n==="value"&&e.dom.value===i&&e.dom===t.activeElement)return;if(e.tag==="select"&&n==="value"&&e.dom.value===i&&e.dom===t.activeElement)return;if(e.tag==="option"&&n==="value"&&e.dom.value===i)return;l[n]=i}else{if(typeof i==="boolean"){if(i)l.setAttribute(n,"");else l.removeAttribute(n)}else l.setAttribute(n==="className"?"class":n,i)}}function M(e){var n=e.attrs;if(e.tag==="select"&&n!=null){if("value"in n)O(e,"value",null,n.value,undefined);if("selectedIndex"in n)O(e,"selectedIndex",null,n.selectedIndex,undefined)}}function P(e,n,t,r){if(t!=null){for(var i in t){O(e,i,n&&n[i],t[i],r)}}if(n!=null){for(var i in n){if(t==null||!(i in t)){if(i==="className")i="class";if(i[0]==="o"&&i[1]==="n"&&!R(i))H(e,i,undefined);else if(i!=="key")e.dom.removeAttribute(i)}}}}function I(e,n){return n==="value"||n==="checked"||n==="selectedIndex"||n==="selected"&&e.dom===t.activeElement}function R(e){return e==="oninit"||e==="oncreate"||e==="onupdate"||e==="onremove"||e==="onbeforeremove"||e==="onbeforeupdate"}function D(e){return e==="href"||e==="list"||e==="form"||e==="width"||e==="height"}function L(e){return e.attrs.is||e.tag.indexOf("-")>-1}function q(e){return e!=null&&(e.oncreate||e.onupdate||e.onbeforeremove||e.onremove)}function F(e,n,t){if(n===t)e.style.cssText="",n=null;if(t==null)e.style.cssText="";else if(typeof t==="string")e.style.cssText=t;else{if(typeof n==="string")e.style.cssText="";for(var r in t){e.style[r]=t[r]}if(n!=null&&typeof n!=="string"){for(var r in n){if(!(r in t))e.style[r]=""}}}}function H(e,n,t){var r=e.dom;var a=typeof i!=="function"?t:function(e){var n=t.call(r,e);i.call(r,e);return n};if(n in r)r[n]=typeof t==="function"?a:null;else{var l=n.slice(2);if(e.events===undefined)e.events={};if(e.events[n]===a)return;if(e.events[n]!=null)r.removeEventListener(l,e.events[n],false);if(typeof t==="function"){e.events[n]=a;r.addEventListener(l,e.events[n],false)}}}function U(e,n,t){if(typeof e.oninit==="function")e.oninit.call(n.state,n);if(typeof e.oncreate==="function")t.push(e.oncreate.bind(n.state,n))}function _(e,n,t,r){if(r)U(e,n,t);else if(typeof e.onupdate==="function")t.push(e.onupdate.bind(n.state,n))}function B(e,n){var t,r;if(e.attrs!=null&&typeof e.attrs.onbeforeupdate==="function")t=e.attrs.onbeforeupdate.call(e.state,e,n);if(typeof e.tag!=="string"&&typeof e.tag.onbeforeupdate==="function")r=e.tag.onbeforeupdate.call(e.state,e,n);if(!(t===undefined&&r===undefined)&&!t&&!r){e.dom=n.dom;e.domSize=n.domSize;e.instance=n.instance;return true}return false}function J(n,r){if(!n)throw new Error("Ensure the DOM element being passed to m.route/m.mount/m.render is not undefined.");var i=[];var a=t.activeElement;if(n.vnodes==null)n.textContent="";if(!Array.isArray(r))r=[r];v(n,n.vnodes,e.normalizeChildren(r),i,null,undefined);n.vnodes=r;for(var l=0;l<i.length;l++)i[l]();if(t.activeElement!==a)a.focus()}return{render:J,setEventCallback:a}};function s(e){var n=16;var t=0,r=null;var i=typeof requestAnimationFrame==="function"?requestAnimationFrame:setTimeout;return function(){var a=Date.now();if(t===0||a-t>=n){t=a;e()}else if(r===null){r=i(function(){r=null;e();t=Date.now()},n-(a-t))}}}var c=function(e){var n=u(e);n.setEventCallback(function(e){if(e.redraw!==false)a()});var t=[];function r(e,n){i(e);t.push(e,s(n))}function i(e){var n=t.indexOf(e);if(n>-1)t.splice(n,2)}function a(){for(var e=1;e<t.length;e+=2){t[e]()}}return{subscribe:r,unsubscribe:i,redraw:a,render:n.render}};var d=c(window);f.setCompletionCallback(d.redraw);var v=function(n){return function(t,r){if(r===null){n.render(t,[]);n.unsubscribe(t);return}if(r.view==null)throw new Error("m.mount(element, component) expects a component, not a vnode");var i=function(){n.render(t,e(r))};n.subscribe(t,i);n.redraw()}};i.mount=v(d);var h=a;var m=function(e){if(e===""||e==null)return{};if(e.charAt(0)==="?")e=e.slice(1);var n=e.split("&"),t={},r={};for(var i=0;i<n.length;i++){var a=n[i].split("=");var l=decodeURIComponent(a[0]);var o=a.length===2?decodeURIComponent(a[1]):"";if(o==="true")o=true;else if(o==="false")o=false;var f=l.split(/\]\[?|\[/);var u=t;if(l.indexOf("[")>-1)f.pop();for(var s=0;s<f.length;s++){var c=f[s],d=f[s+1];var v=d==""||!isNaN(parseInt(d,10));var h=s===f.length-1;if(c===""){var l=f.slice(0,s).join();if(r[l]==null)r[l]=0;c=r[l]++}if(u[c]==null){u[c]=h?o:v?[]:{}}u=u[c]}}return t};var p=function(e){var n=typeof e.history.pushState==="function";var t=typeof setImmediate==="function"?setImmediate:setTimeout;function r(n){var t=e.location[n].replace(/(?:%[a-f89][a-f0-9])+/gim,decodeURIComponent);if(n==="pathname"&&t[0]!=="/")t="/"+t;return t}var i;function a(e){return function(){if(i!=null)return;i=t(function(){i=null;e()})}}function o(e,n,t){var r=e.indexOf("?");var i=e.indexOf("#");var a=r>-1?r:i>-1?i:e.length;if(r>-1){var l=i>-1?i:e.length;var o=m(e.slice(r+1,l));for(var f in o)n[f]=o[f]}if(i>-1){var u=m(e.slice(i+1));for(var f in u)t[f]=u[f]}return e.slice(0,a)}var f={prefix:"#!"};f.getPath=function(){var e=f.prefix.charAt(0);switch(e){case"#":return r("hash").slice(f.prefix.length);case"?":return r("search").slice(f.prefix.length)+r("hash");default:return r("pathname").slice(f.prefix.length)+r("search")+r("hash")}};f.setPath=function(t,r,i){var a={},u={};t=o(t,a,u);if(r!=null){for(var s in r)a[s]=r[s];t=t.replace(/:([^\/]+)/g,function(e,n){delete a[n];return r[n]})}var c=l(a);if(c)t+="?"+c;var d=l(u);if(d)t+="#"+d;if(n){var v=i?i.state:null;var h=i?i.title:null;e.onpopstate();if(i&&i.replace)e.history.replaceState(v,h,f.prefix+t);else e.history.pushState(v,h,f.prefix+t)}else e.location.href=f.prefix+t};f.defineRoutes=function(t,r,i){function l(){var n=f.getPath();var a={};var l=o(n,a,a);var u=e.history.state;if(u!=null){for(var s in u)a[s]=u[s]}for(var c in t){var d=new RegExp("^"+c.replace(/:[^\/]+?\.{3}/g,"(.*?)").replace(/:[^\/]+/g,"([^\\/]+)")+"/?$");if(d.test(l)){l.replace(d,function(){var e=c.match(/:[^\/]+/g)||[];var i=[].slice.call(arguments,1,-2);for(var l=0;l<e.length;l++){a[e[l].replace(/:|\./g,"")]=decodeURIComponent(i[l])}r(t[c],a,n,c)});return}}i(n,a)}if(n)e.onpopstate=a(l);else if(f.prefix.charAt(0)==="#")e.onhashchange=l;l()};return f};var g=function(n,t){var r=p(n);var i=function(e){return e};var a,l,o,f,u;var s=function(n,s,c){if(n==null)throw new Error("Ensure the DOM element that was passed to `m.route` is not undefined");var d=function(){if(a!=null)t.render(n,a(e(l,o.key,o)))};var v=function(){r.setPath(s,null,{replace:true})};r.defineRoutes(c,function(e,n,t){var r=u=function(e,s){if(r!==u)return;l=s!=null&&typeof s.view==="function"?s:"div",o=n,f=t,u=null;a=(e.render||i).bind(e);d()};if(e.view)r({},e);else{if(e.onmatch){h.resolve(e.onmatch(n,t)).then(function(n){r(e,n)},v)}else r(e,"div")}},v);t.subscribe(n,d)};s.set=function(e,n,t){if(u!=null)t={replace:true};u=null;r.setPath(e,n,t)};s.get=function(){return f};s.prefix=function(e){r.prefix=e};s.link=function(e){e.dom.setAttribute("href",r.prefix+e.attrs.href);e.dom.onclick=function(e){if(e.ctrlKey||e.metaKey||e.shiftKey||e.which===2)return;e.preventDefault();e.redraw=false;var n=this.getAttribute("href");if(n.indexOf(r.prefix)===0)n=n.slice(r.prefix.length);s.set(n,undefined,undefined)}};s.param=function(e){if(typeof o!=="undefined"&&typeof e!=="undefined")return o[e];return o};return s};i.route=g(window,d);i.withAttr=function(e,n,t){return function(r){n.call(t||this,e in r.currentTarget?r.currentTarget[e]:r.currentTarget.getAttribute(e))}};var y=u(window);i.render=y.render;i.redraw=d.redraw;i.request=f.request;i.jsonp=f.jsonp;i.parseQueryString=m;i.buildQueryString=l;i.version="1.0.0";i.vnode=e;if(typeof module!=="undefined")module["exports"]=i;else window.m=i};